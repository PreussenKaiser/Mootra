@page "/"
@namespace Mootra.Components.Pages

@using Mootra.Core.Services
@using Mootra.Core.Models
@inject IEmotionService emotionService

<Header Title="Add"/>

<div class="container my-3">
    <div class="row text-center">
        <h2>
            Right now I feel...
        </h2>
    </div>
    <div class="row text-center">
        <h3>
            Or add a new one...
        </h3>
        <EditForm Model="@this.emotionModel" OnValidSubmit="@this.NewEmotionSubmit">
            <DataAnnotationsValidator/>
            <ValidationSummary/>

            <InputText @bind-Value="this.emotionModel.Title"/>
        </EditForm>
    </div>
</div>

@code
{
    /// <summary>
    /// The data model to use for validating new entries.
    /// </summary>
    private Emotion emotionModel = new();

    /// <summary>
    /// Creates the entry.
    /// </summary>
    private async void NewEmotionSubmit()
        => await this.emotionService.CreateEmotionAsync(this.emotionModel);
}
